package com.witmob.bookopen;import java.util.ArrayList;import java.util.List;import android.annotation.SuppressLint;import android.content.Context;import android.util.Log;import android.view.LayoutInflater;import android.view.View;import android.view.View.OnClickListener;import android.view.ViewGroup;import android.widget.BaseAdapter;import android.widget.FrameLayout;import android.widget.ImageView;import android.widget.TextView;@SuppressLint("NewApi")public class BookShelfAdapter extends BaseAdapter {	private LayoutInflater listContainer;	private Context context;	public List viewList = new ArrayList();	public BookShelfAdapter(Context context) {		this.context = context;		listContainer = LayoutInflater.from(context);	}	@Override	public int getCount() {		return 7;	}	@Override	public Object getItem(int position) {		return viewList.get(position);	}	@Override	public long getItemId(int position) {		return 0;	}	public void refreshList(List list) {		viewList.addAll(list);		this.notifyDataSetChanged();	}	public void clear() {		viewList.clear();	}	@Override	public View getView(int position, View convertView, ViewGroup parent) {		final ViewHolder viewHolder;		if (convertView == null) {			// 获取list_item布局文件的视图			viewHolder = new ViewHolder();			convertView = listContainer.inflate(R.layout.grid_item_book, null);			viewHolder.image = (ImageView) convertView.findViewById(R.id.image);			viewHolder.container = (FrameLayout) convertView					.findViewById(R.id.container);			convertView.setTag(viewHolder);		} else {			viewHolder = (ViewHolder) convertView.getTag();		}		final int location = position;		// viewHolder.title.setText(viewList.get(position).getTitle());		// viewHolder.image.setImageResource(Integer.parseInt(viewList.get(position).getCoverImage()));		viewHolder.image.setImageResource(R.drawable.cover);		viewHolder.image.setOnClickListener(new OnClickListener() {			@Override			public void onClick(View v) {				int location2[] = { 0, 0 };				viewHolder.image.getLocationInWindow(location2);				Log.d("ARC", "viewHolder.image.getLocationInWindow:"						+ location2[0] + ";" + location2[1]);				((MainActivity) context).addPerspectiveView(						viewHolder.image,						viewHolder.container.getX(),						viewHolder.container.getY()								+ BookUtils.dip2px(context, 10),						viewHolder.image.getWidth(),						viewHolder.image.getHeight(), R.drawable.cover,						R.drawable.inner_cover);			}		});		return convertView;	}	class ViewHolder {		TextView title;		ImageView image;		ImageView innerImage;		FrameLayout container;	}}